\documentclass[11pt]{article}
\input{../../definitions/font.tex}
\usepackage{textcomp,tikz}
\usepackage{amsmath,amssymb}
\usepackage{xcolor}

\input{../../definitions/colour.tex}
\input{../../definitions/lattice_styles.tex}

\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\pagestyle{empty}
\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{1mm}

\begin{document}

\newlength{\cubeskip}
\setlength{\cubeskip}{1mm}

\begin{tikzpicture}
  
  % No corrections
  % ----------------------------------------------------------------------------
  \begin{scope}
    % Grid
    % --------------------------------------------------
    \draw[lattice] (-.25,.75) grid[step=1] (1.25,3.75);
    \draw[boundary] (0.1,.75) -- +(.8,0);
    \draw[boundary] (0.1,3.75) -- +(.8,0);
    % --------------------------------------------------
    
    % Fermion lines
    % -----------------------------------------------------------
    \begin{scope}
      \clip (-.25,.75) rectangle (1.25,3.75);
      \foreach \x in {-1,...,4} {
        \draw[link=ColourHl1] (0, \x) -- +(0,1);
        \draw[link=ColourHl1] (1cm, \x) -- +(0,1);
      }
      \draw [link=ColourHl1] (0,2cm-\deltaskip) -- +(1cm,0);
      \draw [link=ColourHl1] (1cm,2cm+\deltaskip) -- +(-1cm,0);
    \end{scope}
    % -----------------------------------------------------------
    
    % Axes
    % --------------------------------------------------------------------------
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.25,.5) -- +(1.25,0) 
      node[midway,below=.4mm,anchor=north,inner sep=0pt, scale=0.5] {$\vec{x}$};
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.5,.75) -- +(0,1.75) 
      node[midway,left=.6mm,anchor=east,inner sep=0pt, scale=0.5] {$t$};
    % --------------------------------------------------------------------------
  \end{scope}
  % ----------------------------------------------------------------------------

  % Single plaquette
  % ----------------------------------------------------------------------------
  \begin{scope}[xshift=2.5cm]
    % Grid
    % --------------------------------------------------
    \draw[lattice] (-.25,.75) grid[step=1] (1.25,3.75);
    \draw[boundary] (0.1,.75) -- +(.8,0);
    \draw[boundary] (0.1,3.75) -- +(.8,0);
    % --------------------------------------------------
    
    % Fermion lines
    % -----------------------------------------------------------
    \begin{scope}
      \clip (-.25,.75) rectangle (1.25,3.75);
      \foreach \x in {-1,...,4} {
        \draw[link=ColourHl1] (-\deltaskip, \x) -- +(0,1);
        \draw[link=ColourHl1] (1cm+\deltaskip, \x) -- +(0,1);
      }
      \draw [link=ColourHl1] (-\deltaskip,2cm-\deltaskip) -- +(1cm+2\deltaskip,0);
      \draw [link=ColourHl1] (1cm+\deltaskip,3cm+\deltaskip) -- +(-1cm-2\deltaskip,0);
      \draw [plaquette] (\deltaskip, 3cm-\deltaskip) -- ++(1cm-2\deltaskip,0)
                   -- ++(0, -1cm+2\deltaskip) -- ++(2\deltaskip-1cm,0) -- cycle;
    \end{scope}
    % -----------------------------------------------------------
    
    % Axes
    % --------------------------------------------------------------------------
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.25,.5) -- +(1.25,0) 
      node[midway,below=.4mm,anchor=north,inner sep=0pt, scale=0.5] {$\vec{x}$};
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.5,.75) -- +(0,1.75) 
      node[midway,left=.6mm,anchor=east,inner sep=0pt, scale=0.5] {$t$};
    % --------------------------------------------------------------------------
  \end{scope}
  % ----------------------------------------------------------------------------

  % Cube test
  % ----------------------------------------------------------------------------
  \begin{scope}[xshift=5cm]
    % Grid
    % --------------------------------------------------
    \draw[lattice] (-.25,.75) grid[step=1] (1.25,3.75);
    \draw[boundary] (0.1,.75) -- +(.8,0);
    \draw[boundary] (0.1,3.75) -- +(.8,0);
    % --------------------------------------------------
    
    % Fermion lines
    % -----------------------------------------------------------
    \begin{scope}
      \clip (-.25,.75) rectangle (1.25,3.75);
      \foreach \x in {-1,...,4} {
        \draw[link=ColourHl1] (\deltaskip, \x) -- +(0,1);
        \draw[link=ColourHl1] (1cm-\deltaskip, \x) -- +(0,1);
      }
      \draw [link=ColourHl1] (\deltaskip,2cm+\deltaskip) -- +(1cm-2\deltaskip,0);
      \draw [link=ColourHl1] (1cm-\deltaskip,3cm-\deltaskip) -- +(-1cm+2\deltaskip,0);

      % Cube walls
      % --------------------------------------------------------------------
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (\deltaskip, 2cm+\deltaskip) -- (-\cubeskip,2cm-\cubeskip)
        --(1cm+\cubeskip,2cm-\cubeskip) -- (1cm-\deltaskip,2cm+\deltaskip);
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (1cm-\deltaskip,2cm+\deltaskip) -- (1cm+\cubeskip,2cm-\cubeskip)
        --(1cm+\cubeskip,3cm+\cubeskip) -- (1cm-\deltaskip,3cm-\deltaskip);
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (1cm-\deltaskip,3cm-\deltaskip) -- (1cm+\cubeskip,3cm+\cubeskip)
        --(-\cubeskip,3cm+\cubeskip) -- (\deltaskip,3cm-\deltaskip);
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (\deltaskip,3cm-\deltaskip) -- (-\cubeskip,3cm+\cubeskip)
        --(-\cubeskip,2cm-\cubeskip) -- (\deltaskip, 2cm+\deltaskip);
      % --------------------------------------------------------------------

      \draw[plaquette] (-\cubeskip, 3cm+\cubeskip) -- ++(1cm+2\cubeskip,0)
                   -- ++(0, -1cm-2\cubeskip) -- ++(-2\cubeskip-1cm,0) -- cycle;
      
    \end{scope}
    % -----------------------------------------------------------
    
    % Axes
    % --------------------------------------------------------------------------
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.25,.5) -- +(1.25,0) 
      node[midway,below=.4mm,anchor=north,inner sep=0pt, scale=0.5] {$\vec{x}$};
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.5,.75) -- +(0,1.75) 
      node[midway,left=.6mm,anchor=east,inner sep=0pt, scale=0.5] {$t$};
    % --------------------------------------------------------------------------
  \end{scope}
  % ----------------------------------------------------------------------------

  % Cube with fermions
  % ----------------------------------------------------------------------------
  \begin{scope}[xshift=7.5cm]
    % Grid
    % --------------------------------------------------
    \draw[lattice] (-.25,.75) grid[step=1] (1.25,3.75);
    \draw[boundary] (0.1,.75) -- +(.8,0);
    \draw[boundary] (0.1,3.75) -- +(.8,0);
    % --------------------------------------------------
    
    % Fermion lines
    % -----------------------------------------------------------
    \begin{scope}
      \clip (-.25,.75) rectangle (1.25,3.75);
      \foreach \x in {-1,...,4} {
        \draw[link=ColourHl1] (\deltaskip, \x) -- +(0,1);
        \draw[link=ColourHl1] (1cm-\deltaskip, \x) -- +(0,1);
      }

      % Cube walls
      % --------------------------------------------------------------------
      %\draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          %(\deltaskip, 2cm+\deltaskip) -- (-\cubeskip,2cm-\cubeskip)
        %--(1cm+\cubeskip,2cm-\cubeskip) -- (1cm-\deltaskip,2cm+\deltaskip);
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (1cm-\deltaskip,2cm+\deltaskip) -- (1cm+\cubeskip,2cm-\cubeskip)
        --(1cm+\cubeskip,3cm+\cubeskip) -- (1cm-\deltaskip,3cm-\deltaskip);
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (1cm-\deltaskip,3cm-\deltaskip) -- (1cm+\cubeskip,3cm+\cubeskip)
        --(-\cubeskip,3cm+\cubeskip) -- (\deltaskip,3cm-\deltaskip);
      \draw[link line,postaction = {fill = ColourBase, fill opacity=.1}]
          (\deltaskip,3cm-\deltaskip) -- (-\cubeskip,3cm+\cubeskip)
        --(-\cubeskip,2cm-\cubeskip) -- (\deltaskip, 2cm+\deltaskip);
      % --------------------------------------------------------------------

      \draw [link=ColourHl1] (1cm-\deltaskip,3cm-\deltaskip) -- +(-1cm+2\deltaskip,0);

      \draw[link line=ColourHl1] (\deltaskip, 2cm+\deltaskip) -- (-1.2*\cubeskip,2cm-1.2*\cubeskip);
      \draw[link line=ColourHl1] (1cm+1.2*\cubeskip,2cm-1.2*\cubeskip) -- (1cm-\deltaskip,2cm+\deltaskip);

      \draw[plaquette] (-\cubeskip, 3cm+\cubeskip) -- ++(1cm+2\cubeskip,0)
                   -- ++(0, -1cm-2\cubeskip+\deltaskip) -- ++(-2\cubeskip-1cm,0) -- cycle;

      \draw [link=ColourHl1] (-1.2*\cubeskip,2cm-1.2*\cubeskip) --(1cm+1.2*\cubeskip,2cm-1.2*\cubeskip);

      
    \end{scope}
    % -----------------------------------------------------------
    
    % Axes
    % --------------------------------------------------------------------------
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.25,.5) -- +(1.25,0) 
      node[midway,below=.4mm,anchor=north,inner sep=0pt, scale=0.5] {$\vec{x}$};
    \draw[arrows={-Stealth[length=2pt]},thin,ColourDark] (-.5,.75) -- +(0,1.75) 
      node[midway,left=.6mm,anchor=east,inner sep=0pt, scale=0.5] {$t$};
    % --------------------------------------------------------------------------
  \end{scope}
  % ----------------------------------------------------------------------------


\end{tikzpicture}

\end{document}
