%%% Consistency functions

\newcommand{\sectoken}{\textsc{section}}
\newcommand{\secstoken}{\textsc{sections}}
\newcommand{\eqtoken}{\textsc{eq}}
\newcommand{\figtoken}{\textsc{fig}}

%%% Pretty references

\newcommand{\secref}[1]{\hyperref[#1]{\mbox{\sectoken{} \ref*{#1}}}}

%%% Horribly complicated command to give a list of section references

\newcommand*{\secprevious}{}
\newcommand*{\secseparator}{}

% Prints the previously stored reference, and stores the current
\newcommand{\printoneref}[1]{%
  \secprevious%
  \secseparator%
  \renewcommand*{\secprevious}{%
    \ref{#1}}% store the current element in the \secprevious variable
  \renewcommand*{\secseparator}{, }% update the separator after first element
}

\newcommand{\secrefs}[1]{%
  \renewcommand*{\secprevious}{}%
  \renewcommand*{\secseparator}{}%
  \mbox{\secstoken{}}
  \forcsvlist{\printoneref}{#1}%
  and \secprevious{}%
}

